<%- layout('layouts/main.ejs') %>

<h1>Edit label</h1>

<div class="col-sm-3">
    <form action="/edit_label/<%= label._id %>?_method=PUT" method="post">
        <input type="hidden" name="_method" value="PUT">
        <div class="mb-3">
            <!-- Label name -->
            <label class="form-label">Label</label>
            <input type="text" class="form-control" name="label" value="<%= label.label %>">
            <!-- Tracks -->
            <label class="form-label">Edit associations to tracks</label>
            <!-- If no tracks -->
            <% if(tracks.length == 0){ %>
                <div class="card" style="width: 18rem;">
                    <h5>No tracks yet</h5>
                </div>
            <!-- If tracks -->
            <% } else{ %>
                <ul class="list-group">
                    <% tracks.forEach(function(track){ %>
                    <li class="list-group-item">
                        <!-- If track in label -->                        
                        <% if(label.tracks_ids && label.tracks_ids.includes(track.id)){ %>
                            <input class="form-check-input" type="checkbox" name="<%= track.id %>" id="<%= track.id %>" checked>
                        <% }else{ %>
                            <input class="form-check-input" type="checkbox" name="<%= track.id %>" id="<%= track.id %>">
                        <% } %>
                            <label class="form-check-label" for="<%= track.id %>">
                                <%= track.name %>
                            </label>
                    </li>
                    <% }); %>
                </ul>
            <% } %>
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>